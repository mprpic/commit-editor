[tox]
envlist = py{311,312,313,314}, lint, check-format, typecheck

[testenv]
description = Run tests
deps =
    pytest
    pytest-asyncio
commands = pytest {posargs:tests/}

[testenv:test-cov]
description = Run tests with coverage
deps =
    pytest
    pytest-cov
commands = pytest --cov=commit_editor --cov-report=term-missing {posargs}

[testenv:lint]
description = Run code linter
deps = ruff
commands = ruff check .

[testenv:lint-fix]
description = Fix linting errors
deps = ruff
commands = ruff check --fix .

[testenv:check-format]
description = Check code formatting
deps = ruff
commands = ruff format --check --diff .

[testenv:format]
description = Format code
deps = ruff
commands = ruff format .

[testenv:typecheck]
description = Run type checker
deps = ty
commands = ty check src/
